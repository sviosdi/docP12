<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/ScoreChart.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/ScoreChart.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react'
import * as d3 from 'd3'
import '../assets/ScoreChart.css'
import PropTypes from 'prop-types'

/**
 * The React component displaying the score chart
 * @function RadarChart
 * @param { number } data The score value passed to the component as a property
 * @return { jsx } Returns the jsx component
 */
const ScoreChart = ({ data: score }) => {
    const ref = React.useRef()
    const [scoreW, setScoreW] = useState(0)

    const resizeChart = () => {
        const chart = document.querySelector('.c-score')
        const brect = chart.getBoundingClientRect()
        chart.style.height = `${1.0194 * brect.width}px`
        setScoreW(brect.width)
    }

    useEffect(() => {
        window.addEventListener('resize', resizeChart)
        resizeChart()
        return () => window.removeEventListener('resize', resizeChart)
    }, [])

    useEffect(() => {
        if (ref.current.firstElementChild)
            ref.current.firstElementChild.remove()
        draw()
    }, [scoreW, score])

    const draw = () => {
        var svg = d3
            .select(ref.current)
            .append('svg')
            .style('position', 'absolute')
            .attr('top', 0)
            .attr('left', 0)
            .attr('width', scoreW)
            .attr('height', scoreW * 1.0194)
            .append('g')
            .attr(
                'transform',
                'translate(' + scoreW / 2 + ',' + scoreW / 2 + ')'
            )

        var arc_glob = d3
            .arc()
            .innerRadius(scoreW * 0.3)
            .outerRadius(scoreW * 0.3 + scoreW * 0.05)
            .startAngle(0)
            .endAngle(2 * Math.PI)
        svg.append('path')
            .attr('d', arc_glob)
            .attr('fill', '#e0e0e0')
            .attr('stroke', '#d5d5d5')

        var arc = d3
            .arc()
            .cornerRadius(scoreW * 0.022)
            .innerRadius(scoreW * 0.3)
            .outerRadius(scoreW * 0.3 + scoreW * 0.05)
            .startAngle(0)
            .endAngle(-(2 * score) * Math.PI)
        svg.append('path').attr('d', arc).attr('fill', '#f60000')
    }

    return (
        &lt;>
            &lt;div className="chart3 c-score">
                &lt;div>
                    &lt;div className="c-score-title">Score&lt;/div>
                    &lt;div className="center">
                        &lt;div>{score * 100}%&lt;/div>
                        &lt;div>de votre&lt;/div>
                        &lt;div>objectif&lt;/div>
                    &lt;/div>
                &lt;/div>
                &lt;div ref={ref}>&lt;/div>
            &lt;/div>
        &lt;/>
    )
}

ScoreChart.propTypes = {
    data: PropTypes.number.isRequired,
}

export default ScoreChart
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="API.html">API</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ActiveChart">ActiveChart</a></li><li><a href="global.html#bar">bar</a></li><li><a href="global.html#ErrorPage">ErrorPage</a></li><li><a href="global.html#getRange">getRange</a></li><li><a href="global.html#Homepage">Homepage</a></li><li><a href="global.html#RadarChart">RadarChart</a></li><li><a href="global.html#TimeChart">TimeChart</a></li><li><a href="global.html#UserDataCount">UserDataCount</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Nov 09 2022 16:54:43 GMT+0100 (heure normale dâ€™Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
